(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const c=localStorage.getItem("player1Score")!=null?Number(localStorage.getItem("player1Score")):0,p=localStorage.getItem("computerScore")!=null?Number(localStorage.getItem("computerScore")):0,a={data:{roundHasFinished:!1,isSinglePlayer:null,screenMessage:"",players:{player1Name:"Jugador",player2Name:"Computer"},userTurn:!1,scores:{player1Score:c,player2Score:p},moves:{player1Move:"",player2Move:""},checkScore(e){e.player1Move=="piedra"&&e.player2Move=="papel"?(this.scores.player2Score+=1,this.screenMessage="Computadora gana"):e.player1Move=="papel"&&e.player2Move=="tijeras"?(this.scores.player2Score+=1,this.screenMessage="Computadora gana"):e.player1Move=="tijeras"&&e.player2Move=="piedra"?(this.scores.player2Score+=1,this.screenMessage="Computadora gana"):e.player1Move=="papel"&&e.player2Move=="piedra"?(this.scores.player1Score+=1,this.screenMessage="¡GANASTE!"):e.player1Move=="tijeras"&&e.player2Move=="papel"?(this.scores.player1Score+=1,this.screenMessage="¡GANASTE!"):e.player1Move=="piedra"&&e.player2Move=="tijeras"?(this.scores.player1Score+=1,this.screenMessage="¡GANASTE!"):e.player1Move=="papel"&&e.player2Move=="papel"?this.screenMessage="Empate":e.player1Move=="tijeras"&&e.player2Move=="tijeras"?this.screenMessage="Empate":e.player1Move=="piedra"&&e.player2Move=="piedra"?this.screenMessage="Empate":console.log("COULD NOT HANDLE TURN RESULT")},checkWinner(){let e="";return this.scores.player1Score==3?(this.screenMessage=`${"¡Ganó "+this.players.player1Name} + "!"`,e=this.players.player1Name):this.scores.player2Score==3?(this.screenMessage=`${"¡Ganó "+this.players.player2Name} + "!"`,e=this.players.player2Name):e="",e}},get getWinner(){return this.data.checkWinner},makeMove(e,t){t=="computer"&&(this.data.moves.player2Move=e),t=="player1"&&(this.data.moves.player1Move=e)}};function d(){a.data.checkScore(a.data.moves);const e=document.querySelector(".marker");e&&(e.innerHTML="",e.innerHTML=`
    ${a.data.players.player1Name+" : "+a.data.scores.player1Score.toString()+"<br>"+a.data.players.player2Name+" : "+a.data.scores.player2Score.toString()}
    `),localStorage.setItem("player1Score",a.data.scores.player1Score.toString()),localStorage.setItem("computerScore",a.data.scores.player2Score.toString()),setTimeout(()=>{location.reload()},2e3)}function y(){console.log("COMPUTER TURN");const e=Math.random()*10;let t="";e<3.33&&(t="piedra"),e>3.33&&e<6.66&&(t="papel"),e>6.66&&(t="tijeras");const o=document.querySelector(".player-up-choice");o&&(o.style.backgroundColor="white",o.style.width="50px",o.style.height="50px",o.style.backgroundColor="white",o.style.borderRadius="20px",o.style.boxShadow="0px 0px 20px #000",o.style.backgroundSize="cover",o.style.backgroundImage="url('./src/images/loading.png')",o.style.padding="10px",setTimeout(()=>{o.style.backgroundImage=`url('./src/images/${t}.png')`,a.makeMove(`${t}`,"computer"),d();const r=document.querySelector(".screen-message-text");r&&(r.textContent=a.data.screenMessage)},2e3))}function u(){console.log("USERS TURN FINISHED");const e=document.querySelector(".screen-message-text"),t=document.getElementById("options");t&&(t.style.pointerEvents="none",t.style.opacity="80%",e.style.visibility="visible",e.textContent="Computadora jugando...",y())}function g(){console.log("INSTANTIATE CARDS");const e=document.getElementById("options");e&&(e.style.pointerEvents="auto");const t=[document.getElementById("option1"),document.getElementById("option2"),document.getElementById("option3")];a.data.userTurn=!0;for(const r of t)if(r){switch(r.id){case"option1":r.style.backgroundImage="url('./src/images/piedra.png')",r.style.cursor="pointer";break;case"option2":r.style.backgroundImage="url('./src/images/papel.png')",r.style.cursor="pointer";break;case"option3":r.style.backgroundImage="url('./src/images/tijeras.png')",r.style.cursor="pointer"}r.style.backgroundSize="cover",r.style.width="50px",r.style.height="50px",r.style.backgroundColor="white",r.style.margin="20px",r.style.borderRadius="20px",r.style.boxShadow="0px 0px 20px #000",r!=null&&a.data.userTurn&&r.addEventListener("click",()=>{switch(r.id){case"option1":r.style.boxShadow="0px 0px 20px #9ff",a.makeMove("piedra","player1");break;case"option2":r.style.boxShadow="0px 0px 20px #9ff",a.makeMove("papel","player1");break;case"option3":r.style.boxShadow="0px 0px 20px #9ff",a.makeMove("tijeras","player1");break}u()})}const o=document.getElementById("options");o&&(o.style.display="flex",o.style.justifyContent="space-evenly",o.style.paddingTop="32vh")}function m(){const e=document.querySelector(".marker");e.innerHTML="",e.innerHTML=`
    ${a.data.players.player1Name+" : "+a.data.scores.player1Score.toString()+"<br>"+a.data.players.player2Name+" : "+a.data.scores.player2Score.toString()}
    `,g()}function f(e,t){let o=setInterval(()=>{if(console.log("RUNNING TIMER"),t.textContent=="1"&&(t.style.visibility="hidden",m()),t.textContent=="¡Comienza el juego!")t.textContent=e.toString();else if(t.textContent!="¡Comienza el juego!"){let r=Number(t.textContent);r-=1,t.textContent=r.toString()}t.textContent=="0"&&clearInterval(o)},1e3)}function h(){let e=document.querySelector(".screen-message-text");e&&setTimeout(()=>{f(3,e)},500)}function l(e){if(document.body.innerHTML="",e=="/"){const t=document.createElement("div");t.innerHTML=`
    <div id="home-page">
      <h1 class="hometitle">Piedra, papel o tijeras</h1>
      <div class="home-buttons">
        <button id="home-play-single-player-button" class="button" style="cursor:pointer;">UN JUGADOR</button>
        <button id="home-play-multi-player-button" class="button" style="cursor:pointer;">2 JUGADORES (En desarrollo)</button>
      </div>
    </div>
    `,document.body.append(t),v()}else if(e=="/single-player"){const t=document.createElement("div");t.className="playmap",t.innerHTML=`
    <div>
        <h1 class="marker"></h1>
      <div class="player-up">
      <div class="player-up-choice"></div>
      </div>
      <div class="screen-message">
      <h1 class="screen-message-text">¡Comienza el juego!</h1>
      </div>
      <div class="player-down">
        <div id="options">
          <div id="option1" class="option">
          </div>
          <div id="option2" class="option">
          </div>
          <div id="option3" class="option">
        </div>
      </div>
      </div>
    </div>
    `,document.body.append(t);const o=document.querySelector(".marker");o.style.position="absolute",o.style.paddingLeft="20px",o.style.textAlign="start",o.innerHTML="",o.innerHTML=`
    ${a.data.players.player1Name+" : "+a.data.scores.player1Score.toString()+"<br>"+a.data.players.player2Name+" : "+a.data.scores.player2Score.toString()}
    `,h()}}function S(e){history.pushState({},"",e),l(e)}function v(){const e=document.getElementById("home-play-single-player-button");e==null||e.addEventListener("click",()=>S("/single-player"))}function M(){window.addEventListener("load",()=>{l(location.pathname)}),window.addEventListener("popstate",()=>{location.reload()})}M();
